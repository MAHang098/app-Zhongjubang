(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/add-adress/add-adress"],{"19cc":function(e,t,r){"use strict";(function(e,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(r("53ad"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){return r.e("components/mpvue-picker/mpvuePicker").then(r.bind(null,"167b"))},n=function(){return Promise.all([r.e("common/vendor"),r.e("components/mpvue-citypicker/mpvueCityPicker")]).then(r.bind(null,"fae2"))},o={components:{mpvuePicker:a,mpvueCityPicker:n},data:function(){return{themeColor:"#007AFF",mode:"",deepLength:1,pickerValueDefault:[0],cityPickerValueDefault:[0,0,1],pickerValueArray:[],cityAdress:"",detailedAddress:"",userName:"",phoneNumber:"",isDefault:!1,detailsId:""}},onNavigationBarButtonTap:function(t){var r=this,s=/^[1][3,4,5,7,8][0-9]{9}$/;if(this.phoneNumber.length<11||this.phoneNumber.length>11)return e.showToast({icon:"none",title:"请输入正确的电话号码!"}),void e.hideToast();if(!s.test(this.phoneNumber))return e.showToast({icon:"none",title:"请输入正确的电话号码!"}),void e.hideToast();var i="";e.getStorage({key:"token",success:function(e){i=e.data}});var a={city:this.cityAdress,detail:this.detailedAddress},n=this.cityAdress.split("-"),o={userName:this.userName,userPhone:this.phoneNumber,userAddress:n[0]+n[1]+n[2]+this.detailedAddress},u={userName:this.userName,userPhone:this.phoneNumber,userAddress:JSON.stringify(a),isDefault:1==this.isDefault||"1"==this.isDefault?"1":"0"};if(this.detailsId)return u.userAdressId=this.detailsId,void e.request({url:this.url+"controller/usercontroller/updateuseradress",method:"post",data:u,header:{"content-type":"application/x-www-form-urlencoded",token:i,port:"app"},success:function(t){if(200==t.data.code){if(e.showToast({title:"修改成功",duration:500}),r.$store.state.pageType&&"orderExchange"==r.$store.state.pageType)return r.$store.commit("getAdress",o),r.$store.commit("defaultPage",""),void e.navigateTo({url:"/pages/personal/order-exchange/order-exchange"});setTimeout(function(){e.navigateTo({url:"/pages/receiving-address/receiving-address"})},1e3)}else e.showToast({icon:"none",title:t.data.message}),e.hideToast()}});e.request({url:this.url+"controller/usercontroller/adduseradress",method:"post",data:u,header:{"content-type":"application/x-www-form-urlencoded",token:i,port:"app"},success:function(t){if(421==t.data.code&&e.navigateTo({url:"/pages/loginPhone/loginPhone"}),200==t.data.code){if(e.showToast({title:"添加成功",duration:500}),r.$store.state.pageType&&"orderExchange"==r.$store.state.pageType)return r.$store.commit("getAdress",o),r.$store.commit("defaultPage",""),void e.navigateTo({url:"/pages/personal/order-exchange/order-exchange"});setTimeout(function(){e.navigateTo({url:"/pages/receiving-address/receiving-address"})},1e3)}else e.showToast({icon:"none",title:t.data.message}),e.hideToast()}})},onLoad:function(t){var r=this;if(t.id){this.detailsId=t.id;var i="";e.getStorage({key:"token",success:function(e){i=e.data}}),e.request({url:this.url+"controller/usercontroller/getuseradressbyid",method:"post",data:{id:t.id},header:{"content-type":"application/x-www-form-urlencoded",token:i,port:"app"},success:function(t){if(421==t.data.code&&e.navigateTo({url:"/pages/loginPhone/loginPhone"}),200==t.data.code){var i=t.data.data;console.log(s(i," at pages/add-adress/add-adress.vue:203")),r.userName=i.userName,r.phoneNumber=i.userPhone;var a=JSON.parse(i.userAddress);r.cityAdress=a.city,r.detailedAddress=a.detail,r.detail=i.detail,"1"==i.isDefault?r.isDefault=!0:r.isDefault=!1}}})}},methods:{changeSwith:function(e){1==e.target.value?this.isDefault="1":this.isDefault="0"},showMulLinkageThreePicker:function(){this.$refs.mpvueCityPicker.show()},onCancel:function(e){},onConfirm:function(e){this.cityAdress=JSON.stringify(e.label).replace(/\"/g,"")},onBackPress:function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpvueCityPicker.showPicker?(this.$refs.mpvueCityPicker.pickerCancel(),!0):void 0},onUnload:function(){this.$refs.mpvuePicker.showPicker&&this.$refs.mpvuePicker.pickerCancel(),this.$refs.mpvueCityPicker.showPicker&&this.$refs.mpvueCityPicker.pickerCancel()}}};t.default=o}).call(this,r("6e42")["default"],r("0de9")["default"])},"1eaa":function(e,t,r){},2224:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},i=[];r.d(t,"a",function(){return s}),r.d(t,"b",function(){return i})},3452:function(e,t,r){"use strict";(function(e){r("0497"),r("921b");s(r("66fd"));var t=s(r("651f"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("6e42")["createPage"])},"4fe9":function(e,t,r){"use strict";r.r(t);var s=r("19cc"),i=r.n(s);for(var a in s)"default"!==a&&function(e){r.d(t,e,function(){return s[e]})}(a);t["default"]=i.a},"651f":function(e,t,r){"use strict";r.r(t);var s=r("2224"),i=r("4fe9");for(var a in i)"default"!==a&&function(e){r.d(t,e,function(){return i[e]})}(a);r("699b");var n=r("2877"),o=Object(n["a"])(i["default"],s["a"],s["b"],!1,null,null,null);t["default"]=o.exports},"699b":function(e,t,r){"use strict";var s=r("1eaa"),i=r.n(s);i.a}},[["3452","common/runtime","common/vendor"]]]);