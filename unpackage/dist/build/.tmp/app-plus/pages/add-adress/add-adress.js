(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/add-adress/add-adress"],{"0092":function(e,t,s){"use strict";s.r(t);var r=s("b3b7"),i=s("26fe");for(var a in i)"default"!==a&&function(e){s.d(t,e,function(){return i[e]})}(a);s("fc8d");var n=s("2877"),o=Object(n["a"])(i["default"],r["a"],r["b"],!1,null,null,null);t["default"]=o.exports},"26fe":function(e,t,s){"use strict";s.r(t);var r=s("3625"),i=s.n(r);for(var a in r)"default"!==a&&function(e){s.d(t,e,function(){return r[e]})}(a);t["default"]=i.a},3625:function(e,t,s){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(s("bfd9"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){return s.e("components/mpvue-picker/mpvuePicker").then(s.bind(null,"5ca0"))},n=function(){return Promise.all([s.e("common/vendor"),s.e("components/mpvue-citypicker/mpvueCityPicker")]).then(s.bind(null,"3744"))},o={components:{mpvuePicker:a,mpvueCityPicker:n},data:function(){return{themeColor:"#007AFF",mode:"",deepLength:1,pickerValueDefault:[0],cityPickerValueDefault:[0,0,1],pickerValueArray:[],cityAdress:"",detailedAddress:"",userName:"",phoneNumber:"",isDefault:!1,detailsId:""}},onNavigationBarButtonTap:function(t){var s=this;console.log(e(t," at pages\\add-adress\\add-adress.vue:61"));var i=/^[1][3,4,5,7,6,8][0-9]{9}$/;if(this.phoneNumber.length<11||this.phoneNumber.length>11)r.showToast({icon:"none",title:"请输入正确的电话号码!"});else{if(!i.test(this.phoneNumber))return r.showToast({icon:"none",title:"请输入正确的电话号码!"}),void r.hideToast();var a="";r.getStorage({key:"token",success:function(e){a=e.data}});var n={city:this.cityAdress,detail:this.detailedAddress},o=this.cityAdress.split("-"),u={userName:this.userName,userPhone:this.phoneNumber,userAddress:o[0]+o[1]+o[2]+this.detailedAddress},d={userName:this.userName,userPhone:this.phoneNumber,userAddress:JSON.stringify(n),isDefault:1==this.isDefault||"1"==this.isDefault?"1":"0"};if(this.detailsId)return d.userAdressId=this.detailsId,void r.request({url:this.url+"controller/usercontroller/updateuseradress",method:"post",data:d,header:{"content-type":"application/x-www-form-urlencoded",token:a,port:"app"},success:function(e){if(200==e.data.code){if(r.showToast({title:"修改成功",duration:500}),s.$store.state.pageType&&"orderExchange"==s.$store.state.pageType)return s.$store.commit("getAdress",u),s.$store.commit("defaultPage",""),void r.navigateTo({url:"/pages/personal/order-exchange/order-exchange"});setTimeout(function(){r.navigateTo({url:"/pages/receiving-address/receiving-address"})},1e3)}else r.showToast({icon:"none",title:e.data.message}),r.hideToast()}});r.request({url:this.url+"controller/usercontroller/adduseradress",method:"post",data:d,header:{"content-type":"application/x-www-form-urlencoded",token:a,port:"app"},success:function(e){if(421==e.data.code&&r.navigateTo({url:"/pages/loginPhone/loginPhone"}),200==e.data.code){if(r.showToast({title:"添加成功",duration:500}),s.$store.state.pageType&&"orderExchange"==s.$store.state.pageType)return s.$store.commit("getAdress",u),s.$store.commit("defaultPage",""),void r.navigateTo({url:"/pages/personal/order-exchange/order-exchange"});setTimeout(function(){r.navigateTo({url:"/pages/receiving-address/receiving-address"})},1e3)}else r.showToast({icon:"none",title:e.data.message}),r.hideToast()}})}},onLoad:function(t){var s=this;if(t.id){this.detailsId=t.id;var i="";r.getStorage({key:"token",success:function(e){i=e.data}}),r.request({url:this.url+"controller/usercontroller/getuseradressbyid",method:"post",data:{id:t.id},header:{"content-type":"application/x-www-form-urlencoded",token:i,port:"app"},success:function(t){if(421==t.data.code&&r.navigateTo({url:"/pages/loginPhone/loginPhone"}),200==t.data.code){var i=t.data.data;console.log(e(i," at pages\\add-adress\\add-adress.vue:204")),s.userName=i.userName,s.phoneNumber=i.userPhone;var a=JSON.parse(i.userAddress);s.cityAdress=a.city,s.detailedAddress=a.detail,s.detail=i.detail,"1"==i.isDefault?s.isDefault=!0:s.isDefault=!1}}})}},methods:{changeSwith:function(e){1==e.target.value?this.isDefault="1":this.isDefault="0"},showMulLinkageThreePicker:function(){this.$refs.mpvueCityPicker.show()},onCancel:function(e){},onConfirm:function(e){this.cityAdress=JSON.stringify(e.label).replace(/\"/g,"")},onBackPress:function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpvueCityPicker.showPicker?(this.$refs.mpvueCityPicker.pickerCancel(),!0):void 0},onUnload:function(){this.$refs.mpvuePicker.showPicker&&this.$refs.mpvuePicker.pickerCancel(),this.$refs.mpvueCityPicker.showPicker&&this.$refs.mpvueCityPicker.pickerCancel()}}};t.default=o}).call(this,s("0de9")["default"],s("6e42")["default"])},"3d9b":function(e,t,s){"use strict";(function(e){s("19df"),s("921b");r(s("66fd"));var t=r(s("0092"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("6e42")["createPage"])},a8c5:function(e,t,s){},b3b7:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c},i=[];s.d(t,"a",function(){return r}),s.d(t,"b",function(){return i})},fc8d:function(e,t,s){"use strict";var r=s("a8c5"),i=s.n(r);i.a}},[["3d9b","common/runtime","common/vendor"]]]);