(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/releaseImage/add-tag/add-tag"],{1131:function(t,e,a){"use strict";a.r(e);var n=a("2096"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},2096:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return a.e("components/uni-popup/uni-popup").then(a.bind(null,"0aab"))},r={components:{uniPopup:n},data:function(){return{clientHeight:"",vertical:!1,autoplay:!1,items:[],allImg:0,indexImg:1,rotate:!1,searchVal:0,tagItems:[],isShowAddTag:!0,current:0,tagArr:[],testIndex:null,show:!1,type:"",currentTagIndex:"",currentTagName:"",tagImageIndex:0,autoIndex:null,setIndex:-1}},filters:{ellipsis:function(t){return t?t.length>6?t.slice(0,6)+"...":t:""}},onLoad:function(t){t.current&&(this.current=t.current,this.indexImg=t.indexImg)},onShow:function(){var t,e=!1;this.items=this.$store.state.uploadImage,this.allImg=this.items.length,this.tagItems=[];for(var a=0;a<this.items.length;a++){var n=this.indexImg-1;if(this.isShowAddTag=!0,this.items[a].testArr.length>0&&parseInt(this.items[a].testArr[0].currentImage)==n){this.isShowAddTag=!1,e=!0,t=a;break}}e&&(this.tagItems=this.items[t].testArr[0].allTagArr);var r=getCurrentPages(),i=r[r.length-1];i&&(void 0==i.data.current||""==i.data.current||(this.current=i.data.current,this.indexImg=i.data.indexImg))},created:function(e){var a="";t.getSystemInfo({success:function(t){a=t.windowHeight}}),this.clientHeight=a},methods:{cancel:function(){this.items.forEach(function(t,e,a){t.testArr=[]}),this.$store.commit("saveImage",this.items),t.navigateTo({url:"/pages/releaseImage/release-image/release-image"})},togglePopup:function(t,e,a,n,r){switch(this.tagImageIndex=r,this.currentTagIndex=a,this.currentTagName=n,t){case"top":this.content="顶部弹出 popup";break;case"bottom":this.content="底部弹出 popup";break;case"center":this.content="居中弹出 popup";break}this.type=t,"tip"===e?this.show=!0:this.$refs[e].open()},cancelPopup:function(t){var e=this;"tip"!==t?"skip"===t&&this.items.forEach(function(t,a){var n=t.testArr;n.forEach(function(t,a){var n=t.allTagArr;t.currentImage==e.tagImageIndex&&n.forEach(function(t,a,n){a==e.currentTagIndex&&t.tagName==e.currentTagName&&(n.splice(e.currentTagIndex,1),e.show=!1)})})}):this.show=!1},currenChange:function(t){},changeImage:function(t){var e=t.detail.current;this.indexImg=e+1,this.tagItems=[],this.isShowAddTag=!0;var a=this.items[e].testArr[0];a&&(this.tagItems=a.allTagArr,this.isShowAddTag=!1)},onChange:function(t,e,a,n){if("touch"===t.detail.source){var r=[],i=this.items[a].testArr[0];if(i){r=i.allTagArr;for(var s=0;s<r.length;s++)if(s==e){r[e]={tagName:r[s].tagName,tagX:t.detail.x,tagY:t.detail.y};break}var o={currentImage:a,fileName:n,allTagArr:r,type:"add"};this.$store.commit("saveImage",o)}}},goSearch:function(e,a){t.navigateTo({url:"/pages/releaseImage/search-tag/search-tag?index="+e+"&name="+a})},changeMove:function(t){},nextRelease:function(){t.navigateTo({url:"/pages/releaseImage/release-image/release-image?type=addTag"})}}};e.default=r}).call(this,a("6e42")["default"])},"6efb":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=(t._self._c,t.__map(t.items,function(e,a){var n=t.__map(t.tagItems,function(e,a){var n=t._f("ellipsis")(e.tagName);return{$orig:t.__get_orig(e),f0:n}});return{$orig:t.__get_orig(e),l0:n}}));t.$mp.data=Object.assign({},{$root:{l1:a}})},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},7683:function(t,e,a){"use strict";a.r(e);var n=a("6efb"),r=a("1131");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("de68");var s=a("2877"),o=Object(s["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=o.exports},ba76:function(t,e,a){},de68:function(t,e,a){"use strict";var n=a("ba76"),r=a.n(n);r.a},f2b3:function(t,e,a){"use strict";(function(t){a("0497"),a("921b");n(a("66fd"));var e=n(a("7683"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])}},[["f2b3","common/runtime","common/vendor"]]]);