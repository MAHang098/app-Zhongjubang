(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping-mall/detail/detail"],{2275:function(t,e,o){"use strict";o.r(e);var n=o("d4da"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=i.a},2610:function(t,e,o){"use strict";var n=o("9075"),i=o.n(n);i.a},"82ed":function(t,e,o){"use strict";o.r(e);var n=o("9664"),i=o("2275");for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);o("2610");var s=o("2877"),c=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports},9075:function(t,e,o){},9664:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.recommendItem,function(e,o){var n=t._f("ellipsis")(e.goods_name);return{$orig:t.__get_orig(e),f0:n}}));t.$mp.data=Object.assign({},{$root:{l0:o}})},i=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return i})},d4da:function(t,e,o){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"0aab"))},a={components:{uniPopup:i},data:function(){return{scrollFlag:!1,swiperItem:[],token:"",showExplain:!1,popupType:"",imaData:[],showPlus:!0,typeItem:["红色336*286","红色336*286","红色336*286","红色336*286"],spec_type_name:"",activeIndex:-1,detailItem:[],commentList:[],product_num:1,specificationsId:"",addType:0,recommendItem:[],detailId:"",shopItem:{},reserve:""}},filters:{ellipsis:function(t){return t?t.length>20?t.slice(0,20)+"...":t:""}},onPageScroll:function(t){var e=this;t.scrollTop>50?e.scrollFlag=!0:e.scrollFlag=!1},onLoad:function(t){this.detailId=t.id},onShow:function(){var e=this;t.getStorage({key:"token",success:function(t){e.token=t.data}}),this.init(),this.gainProductRecommend()},methods:{init:function(){var e=this;t.request({url:this.url+"controller/shopcontroller/getgoodsbyid",method:"post",data:{goodsId:this.detailId},header:{"content-type":"application/x-www-form-urlencoded",token:this.token,port:"app"},success:function(o){if(200==o.data.code){var n=[],i=o.data.data[0];e.commentList=i.goodsDiscussList,e.shopItem=i.shop,i.goodsDTO.tag=JSON.parse(i.goodsDTO.tag),e.detailItem=i.goodsDTO,e.swiperItem=i.goodsDTO.topImgList.split(",");for(var a=i.goodsDTO.goodsContent,s=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,c=a.match(/<img[^>]+>/g),d=0;d<c.length;d++){var l=c[d].match(s);n.push(l[1])}e.imaData=n}else t.showToast({icon:"none",title:o.data.message}),t.hideToast()}})},gainProductRecommend:function(){var e=this;t.request({url:this.url+"controller/shopcontroller/getAppGoodsRecommendGoods",method:"post",data:{pageIndex:1,pageSize:100},header:{"content-type":"application/x-www-form-urlencoded",token:this.token,port:"app"},success:function(o){200==o.data.code&&(e.recommendItem=o.data.data.dataList),421==o.data.code&&t.navigateTo({url:"/pages/loginPhone/loginPhone"})}})},explainShow:function(){this.showExplain=!this.showExplain},togglePopup:function(t,e){this.specDetail(),this.popupType=t,"tip"===e||this.$refs[e].open()},cancelPopup:function(t){this.$refs[t].close()},imgPreview:function(e,o){t.previewImage({urls:e,current:o,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){console.log(n("选中了第"+(t.tapIndex+1)+"个按钮,第"+(t.index+1)+"张图片"," at pages/shopping-mall/detail/detail.vue:323"))},fail:function(t){console.log(n(t.errMsg," at pages/shopping-mall/detail/detail.vue:326"))}}})},collectShop:function(e){var o=this;t.request({url:this.url+"controller/usercontroller/addusercollection",method:"post",data:{type:"4",collectionContentId:e},header:{"content-type":"application/x-www-form-urlencoded",token:this.token,port:"app"},success:function(e){200==e.data.code&&o.init(),421==e.data.code&&t.navigateTo({url:"/pages/loginPhone/loginPhone"})}})},specDetail:function(){var e=this;t.request({url:this.url+"controller/shopcontroller/getgoodsspecificationslist",method:"post",data:{goodsId:"1"},header:{"content-type":"application/x-www-form-urlencoded",token:this.token,port:"app"},success:function(o){200==o.data.code&&(e.typeItem=o.data.data),421==o.data.code&&t.navigateTo({url:"/pages/loginPhone/loginPhone"})}})},choseType:function(t,e,o,n){this.spec_type_name=t,this.reserve=n,e!=this.activeIndex?(this.activeIndex=e,this.specificationsId=o):this.activeIndex=-1},define:function(){this.cancelPopup("spec"),""!=this.spec_type_name&&(1!=this.addType?this.addType:this.addCart())},getAllComments:function(e){t.navigateTo({url:"/pages/shopping-mall/detail-evaluate/detail-evaluate?id="+e})},addCart:function(){if(""==this.spec_type_name)return this.togglePopup("bottom","spec"),void(this.addType=1);t.request({url:this.url+"controller/shopcontroller/addshoppingcart",method:"post",data:{goodsId:this.detailItem.id,quantity:this.product_num,specificationsId:this.specificationsId},header:{"content-type":"application/x-www-form-urlencoded",token:this.token,port:"app"},success:function(e){200==e.data.code&&console.log(n(e.data," at pages/shopping-mall/detail/detail.vue:417")),421==e.data.code&&t.navigateTo({url:"/pages/loginPhone/loginPhone"})}})},buy:function(){""==this.spec_type_name&&(this.addType=2,this.togglePopup("bottom","spec"))},add:function(){this.product_num++},reduce:function(){this.product_num>1&&this.product_num--},recommendDetails:function(e){t.navigateTo({url:"/pages/shopping-mall/detail/detail?id="+e})},backPreve:function(){t.navigateBack({delta:1})}}};e.default=a}).call(this,o("6e42")["default"],o("0de9")["default"])},f66c:function(t,e,o){"use strict";(function(t){o("0497"),o("921b");n(o("66fd"));var e=n(o("82ed"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])}},[["f66c","common/runtime","common/vendor"]]]);