(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"60bf":function(e,t,o){"use strict";o.r(t);var a=o("98ee"),n=o("7168");for(var s in n)"default"!==s&&function(e){o.d(t,e,function(){return n[e]})}(s);o("c9aa");var i=o("2877"),r=Object(i["a"])(n["default"],a["a"],a["b"],!1,null,null,null);t["default"]=r.exports},7168:function(e,t,o){"use strict";o.r(t);var a=o("fe68"),n=o.n(a);for(var s in a)"default"!==s&&function(e){o.d(t,e,function(){return a[e]})}(s);t["default"]=n.a},"7c34":function(e,t,o){},"7e17":function(e,t,o){"use strict";(function(e){o("0497"),o("921b");a(o("66fd"));var t=a(o("60bf"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},"98ee":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=(e._self._c,e.__map(e.releaseImgList,function(t,o){var a=e._f("ellipsis")(t.content);return{$orig:e.__get_orig(t),f0:a}})),a=e.__map(e.collectPic,function(t,o){var a=e._f("ellipsis2")(t.content);return{$orig:e.__get_orig(t),f1:a}});e.$mp.data=Object.assign({},{$root:{l0:o,l1:a}})},n=[];o.d(t,"a",function(){return a}),o.d(t,"b",function(){return n})},c9aa:function(e,t,o){"use strict";var a=o("7c34"),n=o.n(a);n.a},fe68:function(e,t,o){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"0aab"))},s=function(){return o.e("components/uni-drawer/uni-drawer").then(o.bind(null,"0204"))},i=function(){return o.e("components/uni-list/uni-list").then(o.bind(null,"6f85"))},r=function(){return o.e("components/uni-list-item/uni-list-item").then(o.bind(null,"c85f"))},c={components:{uniPopup:n,uniDrawer:s,uniList:i,uniListItem:r},data:function(){return{showRigth:!1,showLeft:!1,tabType:["我的动态","短视频","收藏"],collectType:["图片·0","视频·0","商品·0","商铺·0"],show:"",show1:"",showDelete:"",fannum:"",attentionnum:"",likenum:"",nickName:"",head:"",feverBranch:"",remarks:"",sex:"",Tokens:"",current:0,current2:0,cIndex:-1,activeIndex:-1,fabulousIndex:-1,isShowFabulous:!1,isShowCollect:!1,brandFold:!1,isShowAllContent:!0,showEdit:!1,releaseImgList:[],imageDrafts:[],collectVideo:[],collectCommand:[],collectShop:[],collectPic:[],content:"某臣氏骑剑活动！水雾质地 很轻薄 不沾黏！在上待几分钟会变成雾面哑光感某臣氏骑剑活动！水雾质地 很轻薄 不沾黏！在上待几分钟会变成雾面哑光感 超高级！显色很持久...不沾黏！在上待几分钟会变成雾面哑光感 超高级！显色很持久...",popupShow:!1,popupType:"",inputValue:"",outUserId:"",gcircleContentId:"",gCollectionDiscussNum:"",dataList:[],videoList:[],gcircleContentDTO:[],recommendId:"",recommendName:"",getsvdiscussId:"",isShowTopic:!0,replySay:"说点什么把",replyType:"",activeVideo:0,commentItem:[],deleteType:0,cover:""}},filters:{ellipsis:function(e){return e?e.length>45?e.slice(0,45)+"...":e:""},ellipsis2:function(e){return e?e.length>22?e.slice(0,22)+"...":e:""}},onLoad:function(e){e.userid},onShow:function(){var t,o=this;e.getStorage({key:"token",success:function(e){t=e.data,o.Tokens=e.data}});var n=this.url;e.request({url:n+"/controller/usercontroller/getfanattentionlikenum",data:{},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:t},success:function(e){200==e.data.code?(o.attentionnum=e.data.data.attentionnum,o.fannum=e.data.data.fannum,o.likenum=e.data.data.likenum):console.log(a("请求异常"," at pages/user/user.vue:430"))}}),e.request({url:n+"/controller/usercontroller/getappuser",data:{},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:t},success:function(e){200==e.data.code?(o.feverBranch=e.data.data.feverBranch,o.head=e.data.data.head,o.cover=e.data.data.cover,o.nickName=e.data.data.nickName,o.remarks=e.data.data.remarks,o.sex=e.data.data.sex,1==e.data.data.sex?o.show=!0:2==e.data.data.sex&&(o.show=!1)):console.log(a("请求异常"," at pages/user/user.vue:460"))}}),this.initVideo(),this.init()},methods:{deleteCommand:function(t){var o;console.log(a(t," at pages/user/user.vue:470"));var n=this;e.getStorage({key:"token",success:function(e){o=e.data,n.Tokens=e.data}});var s=this.url;e.request({url:s+"controller/usercontroller/addusercollection",data:{type:this.deleteType,collectionContentId:t},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:o},success:function(e){200==e.data.code?(console.log(a("dshdsfsdhf"," at pages/user/user.vue:496")),console.log(a(e," at pages/user/user.vue:497")),n.initCollectCommand(),n.initCollectShop()):console.log(a("请求异常"," at pages/user/user.vue:501"))}})},goDetails:function(t){e.navigateTo({url:"/pages/shopping-mall/detail/detail?id="+t})},deleteVideo:function(e){this.activeVideo=e,console.log(a("1111"," at pages/user/user.vue:514")),this.showDelete=!this.showDelete},videoDelete:function(t){var o,n=this;e.getStorage({key:"token",success:function(e){o=e.data,n.Tokens=e.data}});var s=this.url;e.request({url:s+"/controller/usercontroller/delshortvideo",data:{shortVideoId:t},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:o},success:function(e){200==e.data.code?(console.log(a(e," at pages/user/user.vue:543")),n.initVideo()):console.log(a("请求异常"," at pages/user/user.vue:546"))}})},sendVideo:function(t){e.navigateTo({url:"/pages/index/index?id="+t})},changeProduct:function(e){this.current=e,this.currentType=e+1,this.show1=!this.show1;var t=1;1==e&&(t=2),this.init(t)},changeCollect:function(e){this.current2=e,console.log(a(e," at pages/user/user.vue:569")),1==e?this.initCollectVideo():2==e?(this.deleteType=3,this.initCollectCommand()):3==e?(this.deleteType=4,this.initCollectShop()):this.initCollectPic()},editInfo:function(){e.navigateTo({url:"/pages/editInfo/editInfo"})},open:function(e){this.activeIndex=e,this.isShowAllContent=!this.isShowAllContent,this.brandFold=!this.brandFold},operate:function(e){this.cIndex=e,this.showEdit=!this.showEdit},initCollectVideo:function(){var t=this,o={pageIndex:1,pageSize:1e3};e.showLoading({title:"加载中...",mask:!0}),e.request({url:this.url+"controller/usercontroller/getshortvideolistbycollection",data:o,method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:this.Tokens},success:function(o){if(e.hideLoading(),200==o.data.code){for(var n=0;n<o.data.data.dataList.length;n++)o.data.data.dataList[n].videoUrl=o.data.data.dataList[n].videoUrl.replace("MP4","jpg"),o.data.data.dataList[n].videoUrl=o.data.data.dataList[n].videoUrl.replace("mp4","jpg"),console.log(a(o.data.data.dataList[n].videoUrl," at pages/user/user.vue:622"));t.collectVideo=o.data.data.dataList}}})},initCollectCommand:function(){var t=this,o={pageIndex:1,pageSize:1e3};e.showLoading({title:"加载中...",mask:!0}),e.request({url:this.url+"controller/usercontroller/getgoodslistbycollection",data:o,method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:this.Tokens},success:function(o){e.hideLoading(),200==o.data.code&&(console.log(a(o," at pages/user/user.vue:649")),t.collectCommand=o.data.data.dataList)}})},initCollectShop:function(){var t=this;console.log(a("dianpu"," at pages/user/user.vue:659"));var o={pageIndex:1,pageSize:1e3};e.showLoading({title:"加载中...",mask:!0}),e.request({url:this.url+"controller/usercontroller/getshoplistbycollection",data:o,method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:this.Tokens},success:function(o){e.hideLoading(),200==o.data.code&&(console.log(a(o," at pages/user/user.vue:676")),t.collectShop=o.data.data.dataList)}})},initCollectPic:function(){console.log(a("tupian"," at pages/user/user.vue:685"));var t=this,o={pageIndex:1,pageSize:1e3};e.showLoading({title:"加载中...",mask:!0}),e.request({url:this.url+"controller/usercontroller/getgcriclecontentlistbycollection",data:o,method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:this.Tokens},success:function(o){if(e.hideLoading(),200==o.data.code){console.log(a(o," at pages/user/user.vue:703"));for(var n=0;n<o.data.data.dataList.length;n++)o.data.data.dataList[n].imgList=JSON.parse(o.data.data.dataList[n].imgList);console.log(a(o.data.data.dataList[0].imgList[0].fileUrl," at pages/user/user.vue:707")),t.collectPic=o.data.data.dataList}}})},init:function(){var t=this,o={pageIndex:1,pageSize:1e3};e.showLoading({title:"加载中...",mask:!0}),e.request({url:this.url+"/controller/usercontroller/getgcirclecontentlist",data:o,method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:this.Tokens},success:function(o){if(e.hideLoading(),200==o.data.code){for(var a=o.data.data.dataList,n=0;n<a.length;n++)a[n].imgList=JSON.parse(a[n].imgList),a[n].title=JSON.parse(a[n].title);t.releaseImgList=a}}})},initVideo:function(){var t,o=this;e.getStorage({key:"token",success:function(e){t=e.data,o.Tokens=e.data}});var n=this.url;e.request({url:n+"/controller/usercontroller/getshortvideobyuserid",data:{pageSize:100},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:t},success:function(e){if(200==e.data.code){for(var t=0;t<e.data.data.dataList[0].length;t++)e.data.data.dataList[0][t].videoUrl=e.data.data.dataList[0][t].videoUrl.replace("MP4","jpg"),e.data.data.dataList[0][t].videoUrl=e.data.data.dataList[0][t].videoUrl.replace("mp4","jpg");o.videoList=e.data.data.dataList[0]}else console.log(a("请求异常"," at pages/user/user.vue:788"))}})},editRelease:function(t,o){this.$store.commit("saveImage",t.imgList);var a={editId:o,title:t.title,content:t.content,type:"user"};this.$store.commit("saveDrafts",a),this.$store.commit("updateType",t.title),e.navigateTo({url:"/pages/releaseImage/release-image/release-image"}),this.showEdit=!this.showEdit},deleteRelease:function(t){var o=this;e.request({url:this.url+"/controller/usercontroller/delgcirclecontent",data:{circlecontentId:t},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:this.Tokens},success:function(t){200==t.data.code&&(e.showToast({title:"删除成功",duration:500}),o.showEdit=!o.showEdit,o.init())}})},collect:function(t,o,a){var n=this;e.request({url:this.url+"controller/usercontroller/addusercollection",method:"post",data:{collectionContentId:o,type:"1"},header:{"content-type":"application/x-www-form-urlencoded",token:this.Tokens,port:"app"},success:function(o){if(200==o.data.code){if(n.init(),n.activeIndex=t,1==a)return void(n.isShowCollect=!1);n.isShowCollect=!n.isShowCollect}else e.showToast({icon:"none",title:o.data.message}),e.hideToast()}})},fabulous:function(t,o,a){var n=this;e.request({url:this.url+"controller/usercontroller/addgcirclecontentlike",method:"post",data:{gcircleContentId:o},header:{"content-type":"application/x-www-form-urlencoded",token:this.Tokens,port:"app"},success:function(o){if(200==o.data.code){if(n.init(),n.fabulousIndex=t,1==a)return void(n.isShowFabulous=!1);n.isShowFabulous=!n.isShowFabulous}else e.showToast({icon:"none",title:o.data.message}),e.hideToast()}})},goTopic:function(t){var o=JSON.parse(t).topicId;e.navigateTo({url:"/pages/topicDetails/topicDetails?id="+o})},commentsFabulous:function(t,o,a){var n=this,s="";e.getStorage({key:"token",success:function(e){s=e.data}}),e.request({url:this.url+"controller/usercontroller/adddiscusslike",method:"post",data:{discussId:o,type:"1"},header:{"content-type":"application/x-www-form-urlencoded",token:s,port:"app"},success:function(o){if(200==o.data.code){if(n.activeIndex=t,n.comments(n.getsvdiscussId),1==a)return void(n.isCommentsFabulous=!1);n.isCommentsFabulous=!n.isCommentsFabulous}else e.showToast({icon:"none",title:o.data.message}),e.hideToast()}})},comments:function(t){var o=this,a="";e.getStorage({key:"token",success:function(e){a=e.data}});var n={gcircleContentId:t,pageIndex:1,pageSize:1e3};e.request({url:this.url+"controller/usercontroller/getgcdiscusslist",data:n,method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:a},success:function(t){200==t.data.code?o.commentItem=t.data.data.dataList[0].listFu:(e.showToast({icon:"none",title:t.data.message}),e.hideToast())}})},testreply:function(e,t){this.recommendId=e,this.recommendName=t,this.replySay="回复@"+t+" :"},recordName:function(t){var o,n=this;this.inputValue=t.detail.value,console.log(a(t.detail.value," at pages/user/user.vue:962"));var s=this;e.getStorage({key:"token",success:function(e){o=e.data}});var i=this.url;""!=this.recommendId?e.request({url:i+"controller/usercontroller/addanswergcirclecontentdiscuss",data:{outUserId:s.outUserId,id:s.recommendId,outUserName:s.recommendName,gcircleContentDiscuss:t.detail.value},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:o},success:function(t){n.init(),200==t.data.code?(e.showToast({title:"已发送",duration:1e3}),n.inputValue="说点什么吧...",n.cancelPopup("comments"),n.init()):console.log(a("请求异常"," at pages/user/user.vue:998"))}}):e.request({url:i+"controller/usercontroller/addgcirclecontentdiscuss",data:{outUserId:s.outUserId,gcircleContentId:s.gcircleContentId,outUserName:s.nickName,gcircleContentDiscuss:t.detail.value},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:o},success:function(t){n.init(),200==t.data.code?(e.showToast({title:"已发送",duration:1e3}),n.inputValue=" ",n.cancelPopup("comments")):console.log(a("请求异常"," at pages/user/user.vue:1028"))}})},reply:function(t){e.navigateTo({url:"/pages/ganswer/ganswer?Id="+t})},deleteComment:function(t){var o=this;e.request({url:this.url+"controller/usercontroller/delgcirclecontentdiscuss",data:{gcircleContentDiscussId:t},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:this.Tokens},success:function(t){o.init(),200==t.data.code?(e.showToast({title:"删除成功",duration:500}),o.comments(o.getsvdiscussId)):console.log(a("请求异常"," at pages/user/user.vue:1063"))}})},replyComments:function(e,t,o){this.replySay="回复@"+o+" :",this.recommendId=t,this.outUserId=e,this.recommendName=o},previewImage:function(t,o){this.$store.commit("saveImage",o);var a=t+1;e.navigateTo({url:"/pages/previewImage/previewImage?current="+t+"&indexImg="+a})},togglePopup:function(e,t,o,a,n,s){switch(this.getsvdiscussId=a,this.outUserId=o,this.gcircleContentId=a,this.gCollectionDiscussNum=s,this.nickName=n,e){case"top":this.content="顶部弹出 popup";break;case"bottom":this.content="底部弹出 popup";break;case"center":this.content="居中弹出 popup";break}this.popupType=e,"tip"===t?this.popupShow=!0:this.$refs[t].open(),this.comments(a)},cancelPopup:function(e){this.$refs[e].close()},popupChange:function(t){console.log(a(t," at pages/user/user.vue:1117")),1==t.show?e.hideTabBar():e.showTabBar()},goPockets:function(){e.navigateTo({url:"/pages/wallet/wallet"})},goHot:function(){e.navigateTo({url:"/pages/personal/hot-points/hot-points"})},goList:function(){},goDrafts:function(){e.navigateTo({url:"/pages/drafts/drafts"})},goRecommend:function(){},goAccount:function(){e.navigateTo({url:"/pages/account/account"})},goRanked:function(){},goIdentify:function(){e.navigateTo({url:"/pages/ID-card/ID-card"})},goSetting:function(){e.navigateTo({url:"/pages/setting/setting"})},showDrawer:function(e){"left"===e?this.showLeft=!0:this.showRigth=!0},hide:function(){this.showLeft=!1,this.showRigth=!1},closeDrawer:function(e){"left"===e?this.showLeft=!1:this.showRigth=!1}},onNavigationBarButtonTap:function(e){this.showRigth=!this.showRigth},onBackPress:function(){if(this.showRigth||this.showLeft)return this.hide(),!0}};t.default=c}).call(this,o("6e42")["default"],o("0de9")["default"])}},[["7e17","common/runtime","common/vendor"]]]);