(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/topicDetails/topicDetails"],{"0185":function(t,e,o){"use strict";var a=o("a2a7"),s=o.n(a);s.a},"0262":function(t,e,o){"use strict";o.r(e);var a=o("c059"),s=o.n(a);for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);e["default"]=s.a},"5cda":function(t,e,o){"use strict";(function(t){o("19df"),o("921b");a(o("66fd"));var e=a(o("b641"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},"980d":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=(t._self._c,t.__map(t.topicList,function(e,o){var a=t._f("ellipsis")(e.content);return{$orig:t.__get_orig(e),f0:a}}));t.$mp.data=Object.assign({},{$root:{l0:o}})},s=[];o.d(e,"a",function(){return a}),o.d(e,"b",function(){return s})},a2a7:function(t,e,o){},b641:function(t,e,o){"use strict";o.r(e);var a=o("980d"),s=o("0262");for(var i in s)"default"!==i&&function(t){o.d(e,t,function(){return s[t]})}(i);o("0185");var n=o("2877"),c=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,null,null);e["default"]=c.exports},c059:function(t,e,o){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{isFoucs:!1,talkThemeState:0,replySay:"说点什么吧...",topic:"",brandFold:!1,isShowAllContent:!0,show:!0,talkThemeNum:0,participateCount:0,talkThemeRemarks:"",scrollFlag:!1,content:"",topicList:[],activeIndex:-1,fabulousIndex:-1,isShowFocus:!1,isShowFabulous:!1,isShowCollect:!1,topicId:"",popupShow:!1,popupType:"",inputValue:"",outUserId:"",gcircleContentId:"",nickName:"",gCollectionDiscussNum:"",dataList:[],recommendId:"",recommendName:"",getsvdiscussId:"",isShowTopic:!0,reload:!1,statusMore:"more",contentText:{contentdown:"上拉加载更多",contentnomore:"没有更多"},page:1,id:""}},filters:{ellipsis:function(t){return t?t.length>45?t.slice(0,45)+"...":t:""}},mounted:function(){},onLoad:function(t){"topic"==t.type&&(this.isShowTopic=!1),this.topicId=t.id,this.page=1,this.init(t.id)},onPageScroll:function(t){var e=this;t.scrollTop>50?e.scrollFlag=!0:e.scrollFlag=!1},onReachBottom:function(){this.statusMore="more",this.init(this.topicId)},methods:{testreply:function(e,o){console.log(t(e,o," at pages\\topicDetails\\topicDetails.vue:248")),this.recommendId=e,this.recommendName=o,this.replySay="回复"+o+":"},recordName:function(e){var a;this.inputValue=e.detail.value;var s=this;o.getStorage({key:"token",success:function(t){a=t.data}});var i=this.url;""!=this.recommendId?o.request({url:i+"controller/usercontroller/addanswergcirclecontentdiscuss",data:{outUserId:s.outUserId,id:s.recommendId,outUserName:s.recommendName,gcircleContentDiscuss:e.detail.value},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:a},success:function(e){console.log(t(e," at pages\\topicDetails\\topicDetails.vue:281")),200==e.data.code||console.log(t("请求异常"," at pages\\topicDetails\\topicDetails.vue:285"))}}):o.request({url:i+"controller/usercontroller/addgcirclecontentdiscuss",data:{outUserId:s.outUserId,gcircleContentId:s.gcircleContentId,outUserName:s.nickName,gcircleContentDiscuss:e.detail.value},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:a},success:function(e){console.log(t(e," at pages\\topicDetails\\topicDetails.vue:305")),200==e.data.code||console.log(t("请求异常"," at pages\\topicDetails\\topicDetails.vue:309"))}})},reply:function(e){console.log(t(e," at pages\\topicDetails\\topicDetails.vue:317")),o.navigateTo({url:"/pages/ganswer/ganswer?Id="+e})},focusTopic:function(){var t=this,e="";o.getStorage({key:"token",success:function(t){e=t.data}}),o.request({url:this.url+"controller/contentcontroller/addtalkthemeuser",method:"post",data:{talkThemeId:this.topicId},header:{"content-type":"application/x-www-form-urlencoded",token:e,port:"app"},success:function(e){o.hideLoading(),200==e.data.code?t.init(t.topicId):(o.showToast({icon:"none",title:e.data.message}),o.hideToast())}})},init:function(t){var e=this;o.showLoading({title:"加载中",mask:!0});var a="";o.getStorage({key:"token",success:function(t){a=t.data}});var s={talkThemeId:t,pageIndex:this.page,pageSize:20};o.request({url:this.url+"controller/contentcontroller/getgcriclecontentlistbytalkthemeid",method:"post",data:s,header:{"content-type":"application/x-www-form-urlencoded",token:a,port:"app"},success:function(t){o.hideLoading();var a=t.data.data.pageSize*t.data.data.totalPage,s=t.data.data.dataList[0];if(e.topic=s.talkTheme,e.talkThemeNum=s.talkThemeNum,e.participateCount=s.participateCount,e.talkThemeState=s.talkThemeState,null!=s.talkThemeRemarks)if(e.talkThemeRemarks=s.talkThemeRemarks,e.topicList.length!=a)if(200==t.data.code){for(var i=s.allGContentList,n=0;n<i.length;n++)i[n].imgList=JSON.parse(i[n].imgList);e.topicList=i}else o.showToast({icon:"none",title:t.data.message}),o.hideToast();else e.statusMore="end";else e.talkThemeRemarks=" "}})},previewImage:function(t,e){this.$store.commit("saveImage",e);var a=t+1;o.navigateTo({url:"/pages/previewImage/previewImage?current="+t+"&indexImg="+a})},open:function(t){this.activeIndex=t,this.isShowAllContent=!this.isShowAllContent,this.brandFold=!this.brandFold},focus:function(t,e,a){var s=this,i=this,n="";o.getStorage({key:"token",success:function(t){n=t.data}}),o.request({url:this.url+"controller/usercontroller/addattentionrelationship",method:"post",data:{outUserId:e},header:{"content-type":"application/x-www-form-urlencoded",token:n,port:"app"},success:function(e){if(200==e.data.code){if(i.init(i.topicId),s.activeIndex=t,1==a)return void(s.isShowFocus=!1);s.isShowFocus=!s.isShowFocus}else o.showToast({icon:"none",title:e.data.message}),o.hideToast()}})},collect:function(t,e,a){var s=this,i="";o.getStorage({key:"token",success:function(t){i=t.data}}),o.request({url:this.url+"controller/usercontroller/addusercollection",method:"post",data:{collectionContentId:e,type:"1"},header:{"content-type":"application/x-www-form-urlencoded",token:i,port:"app"},success:function(e){if(200==e.data.code){if(s.init(s.topicId),s.activeIndex=t,1==a)return void(s.isShowCollect=!1);s.isShowCollect=!s.isShowCollect}else o.showToast({icon:"none",title:e.data.message}),o.hideToast()}})},fabulous:function(t,e,a){var s=this,i="";o.getStorage({key:"token",success:function(t){i=t.data}}),o.request({url:this.url+"controller/usercontroller/addgcirclecontentlike",method:"post",data:{gcircleContentId:e},header:{"content-type":"application/x-www-form-urlencoded",token:i,port:"app"},success:function(e){if(200==e.data.code){if(s.init(s.topicId),s.fabulousIndex=t,1==a)return void(s.isShowFabulous=!1);s.isShowFabulous=!s.isShowFabulous}else o.showToast({icon:"none",title:e.data.message}),o.hideToast()}})},goRelease:function(){var t={topic:this.topic,topicId:this.topicId};this.$store.commit("updateType",t),o.navigateTo({url:"/pages/releaseImage/release-image/release-image"})},commentsFabulous:function(t,e,a){var s=this,i="";o.getStorage({key:"token",success:function(t){i=t.data}}),o.request({url:this.url+"controller/usercontroller/adddiscusslike",method:"post",data:{discussId:e,type:"1"},header:{"content-type":"application/x-www-form-urlencoded",token:i,port:"app"},success:function(e){if(200==e.data.code){if(s.activeIndex=t,s.comments(s.getsvdiscussId),1==a)return void(s.isCommentsFabulous=!1);s.isCommentsFabulous=!s.isCommentsFabulous}else o.showToast({icon:"none",title:e.data.message}),o.hideToast()}})},comments:function(t){var e=this,a="";o.getStorage({key:"token",success:function(t){a=t.data}});var s={id:t,pageIndex:1,pageSize:1e4};o.request({url:e.url+"controller/usercontroller/getgcdiscusslist",data:s,method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:a},success:function(t){200==t.data.code?e.dataList=t.data.data.dataList:(o.showToast({icon:"none",title:t.data.message}),o.hideToast())}})},togglePopup:function(t,e,o,a,s,i){switch(this.getsvdiscussId=a,this.outUserId=o,this.gcircleContentId=a,this.gCollectionDiscussNum=i,this.nickName=s,t){case"top":this.content="顶部弹出 popup";break;case"bottom":this.content="底部弹出 popup";break;case"center":this.content="居中弹出 popup";break}this.popupType=t,"tip"===e?this.popupShow=!0:this.$refs[e].open(),this.comments(a)},cancelPopup:function(t){this.$refs[t].close()},cancel:function(){o.navigateBack()},goOtheruser:function(t){o.navigateTo({url:"/pages/otherUser/otherUser?userid="+t})},contentDetail:function(t){o.navigateTo({url:"/pages/releaseImage-details/releaseImage-details?id="+t})}}};e.default=a}).call(this,o("0de9")["default"],o("6e42")["default"])}},[["5cda","common/runtime","common/vendor"]]]);