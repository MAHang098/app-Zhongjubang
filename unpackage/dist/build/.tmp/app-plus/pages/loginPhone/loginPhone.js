(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/loginPhone/loginPhone"],{"0bdb":function(e,n,o){"use strict";(function(e){o("0497"),o("921b");t(o("66fd"));var n=t(o("6e3b"));function t(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,o("6e42")["createPage"])},"41d0":function(e,n,o){"use strict";(function(e,t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){return o.e("components/m-input").then(o.bind(null,"4c30"))},i={components:{mInput:a},data:function(){return{providerList:[],hasProvider:!1,account:"",password:"",positionTop:0,token:[],isActive:!1,second:60}},methods:{close:function(){e.navigateTo({url:"/pages/main/main"})},sendCod:function(){var n=this;if(11==this.account.length){this.isActive=!0;var o=setInterval(function(){--n.second},1e3);setTimeout(function(){clearInterval(o),n.isActive=!1,n.second=60},6e4);var a=this.account,i={phone:a,type:"2"},l=this.url;e.request({url:l+"/public/public/sendverificationcode",data:i,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){console.log(t(e," at pages/loginPhone/loginPhone.vue:105"))}})}else e.showToast({icon:"none",title:"请输入正确的电话号码!"})},bindLogin:function(){if(11==this.account.length){var n=this.account,o={phone:n,type:"2",code:this.password},a=this.url;e.request({url:a+"/public/public/checkverificationcode",data:o,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(o){console.log(t(o.data.code," at pages/loginPhone/loginPhone.vue:144")),"200"==o.data.code?e.request({url:a+"/controller/usercontroller/addappuser",data:{phone:n},method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(n){console.log(t(n," at pages/loginPhone/loginPhone.vue:152")),e.setStorage({key:"token",data:n.data.token}),e.switchTab({url:"/pages/main/main"})}}):e.showToast({icon:"none",title:"验证码错误"})}})}else e.showToast({icon:"none",title:"请输入正确的电话号码!"})},tologinPwd:function(){e.navigateTo({url:"/pages/loginPwd/loginPwd"})},wechatbindLogin:function(){var n=this;e.getProvider({service:"oauth",success:function(o){console.log(t(o.provider," at pages/loginPhone/loginPhone.vue:191")),~o.provider.indexOf("weixin")&&e.login({provider:"weixin",success:function(o){console.log(t("-------获取openid(unionid)-----"," at pages/loginPhone/loginPhone.vue:197")),console.log(t(JSON.stringify(o)," at pages/loginPhone/loginPhone.vue:198")),e.getUserInfo({provider:"weixin",success:function(o){console.log(t("-------获取微信用户所有-----"," at pages/loginPhone/loginPhone.vue:203")),console.log(t(JSON.stringify(o.userInfo)," at pages/loginPhone/loginPhone.vue:204"));var a=JSON.stringify(o.userInfo);a=JSON.parse(a),e.request({url:n.url+"/controller/usercontroller/weixinlogin",data:{wxToken:a.openId,nickName:a.nickName,sex:a.gender,region:a.province,head:a.avatarUrl,unionId:a.unionId},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app"},success:function(o){if(200==o.data.code){console.log(t(o.data.token," at pages/loginPhone/loginPhone.vue:221")),e.setStorage({key:"token",data:o.data.token});var a=o.data.token;console.log(t("22222"," at pages/loginPhone/loginPhone.vue:228")),e.request({url:n.url+"/controller/usercontroller/getappuser",data:{},method:"POST",header:{"content-type":"application/x-www-form-urlencoded",port:"app",token:a},success:function(n){console.log(t("1111"," at pages/loginPhone/loginPhone.vue:239")),console.log(t(n," at pages/loginPhone/loginPhone.vue:240")),console.log(t(n.data.data.state," at pages/loginPhone/loginPhone.vue:241")),0==n.data.data.state?e.navigateTo({url:"/pages/releaseVideo2/releaseVideo2"}):e.navigateTo({url:"/pages/bindPhone/bindPhone"})}})}else console.log(t("请求异常"," at pages/loginPhone/loginPhone.vue:258"));console.log(t(o.data.code," at pages/loginPhone/loginPhone.vue:260"))}})}})}})}})},toAgreement:function(){e.navigateTo({url:"/pages/agreement/agreement"})}}};n.default=i}).call(this,o("6e42")["default"],o("0de9")["default"])},"6e3b":function(e,n,o){"use strict";o.r(n);var t=o("9ee4"),a=o("a1a7");for(var i in a)"default"!==i&&function(e){o.d(n,e,function(){return a[e]})}(i);o("73ac");var l=o("2877"),c=Object(l["a"])(a["default"],t["a"],t["b"],!1,null,null,null);n["default"]=c.exports},"73ac":function(e,n,o){"use strict";var t=o("937b"),a=o.n(t);a.a},"937b":function(e,n,o){},"9ee4":function(e,n,o){"use strict";var t=function(){var e=this,n=e.$createElement;e._self._c},a=[];o.d(n,"a",function(){return t}),o.d(n,"b",function(){return a})},a1a7:function(e,n,o){"use strict";o.r(n);var t=o("41d0"),a=o.n(t);for(var i in t)"default"!==i&&function(e){o.d(n,e,function(){return t[e]})}(i);n["default"]=a.a}},[["0bdb","common/runtime","common/vendor"]]]);