(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/testVideo/testVideo"],{2031:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return o})},"59ab":function(t,e,i){"use strict";i.r(e);var s=i("742d"),o=i.n(s);for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);e["default"]=o.a},"742d":function(t,e,i){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{system:this.systemInfo(),videolist:[],clientHeight:"0",currentPage:0,showPage:0,nextPage:0,touchdata:{can:!0,startY:0,endY:0,diff:0},playIndex:-1,scrollTop:0,scrollToView:"view-0",showCover:!0,animationData:{},playTime:0,scrollDetail:{deltaY:0},scrollFlag:!1,scrollStartTop:0,pageSize:20,pageIndex:0,scene:"",showTab:!0}},mounted:function(){var e=this;t.getSystemInfo({success:function(t){console.log(i(t.model," at pages\\testVideo\\testVideo.vue:67")),console.log(i(t.pixelRatio," at pages\\testVideo\\testVideo.vue:68")),console.log(i(t.windowWidth," at pages\\testVideo\\testVideo.vue:69")),console.log(i(t.windowHeight," at pages\\testVideo\\testVideo.vue:70")),console.log(i(t.language," at pages\\testVideo\\testVideo.vue:71")),console.log(i(t.version," at pages\\testVideo\\testVideo.vue:72")),console.log(i(t.platform," at pages\\testVideo\\testVideo.vue:73")),e.$data.clientHeight=t.windowHeight}})},watch:{},onShareAppMessage:function(t){var e=this.videolist[this.currentPage],i="「好物短视频」"+e.video_desc;return{title:i,path:"/pages/video/main?scene="+e.id}},onLoad:function(e){var s=this;if(t.showShareMenu({}),e.scene&&"default"!=e.scene){this.scene=e.scene;var o=e.scene;this.postJson({path:"/video_one.jsp",data:{videoId:o},success:function(t){if("ok"==t.data.status){var e=t.data.data;s.videolist=e.concat(s.videolist);e[0]}}})}this.postJson({path:"/video_main.jsp",data:{pageIndex:this.pageIndex,pageSize:this.pageSize,type:1},success:function(t){if(console.log(i(t.data," at pages\\testVideo\\testVideo.vue:125")),"ok"==t.data.status){s.pageIndex++;var e=t.data.data;s.videolist=s.videolist.concat(e)}}}),setInterval(this.listenScroll,200)},methods:{download:function(t){},refresh:function(){var e=this;this.play(-1),t.showLoading({title:"加载中"}),this.videolist=[],this.pageIndex=0,this.postJson({path:"/video_main.jsp",data:{pageIndex:this.pageIndex,pageSize:this.pageSize,type:1},success:function(t){console.log(i(t.data," at pages\\testVideo\\testVideo.vue:157")),"ok"==t.data.status&&(e.pageIndex++,e.videolist=t.data.data,e.currentPage=0,e.scrollToView="view-0")},complete:function(){t.hideLoading()}})},scrolltolower:function(){var t=this;this.postJson({path:"/video_main.jsp",data:{pageIndex:this.pageIndex,pageSize:this.pageSize,type:1},success:function(e){if(console.log(i(e.data," at pages\\testVideo\\testVideo.vue:179")),"ok"==e.data.status){t.pageIndex++;var s=e.data.data;t.videolist=t.videolist.concat(s)}}})},play:function(e){var i="video-"+e,s="video-"+this.playIndex;if(-1==this.playIndex){this.playIndex=e;var o=t.createVideoContext(i);o&&(o.play(),this.playTime=(new Date).getTime())}else{var a=t.createVideoContext(s);if(a){a.pause();var l={playTime:this.playTime,endTime:(new Date).getTime(),videoId:this.videolist[this.playIndex].id,videoUid:this.videolist[this.playIndex].uid};this.browser(l),e!=this.playIndex?(this.playIndex=e,a=t.createVideoContext(i),a&&(a.play(),this.playTime=(new Date).getTime())):this.playIndex=-1}}},pause:function(e){var i="video-"+e,s=t.createVideoContext(i);if(s){s.pause();var o={playTime:this.playTime,endTime:(new Date).getTime(),videoId:this.videolist[e].id,videoUid:this.videolist[e].uid};this.browser(o)}this.playIndex=-1},browser:function(t){t.playTime<=0||(this.playTime=0,this.postJson({path:"/video_browser_do.jsp",data:t,success:function(t){}}))},listenScroll:function(){0!=this.scrollDetail.deltaY?(this.scrollFlag||(this.scrollStart(),this.scrollFlag=!0,this.scrollStartTop=this.scrollDetail.scrollTop),this.scrollDetail.deltaY=0):this.scrollFlag&&(this.scrollEnd(),this.scrollFlag=!1)},scrollStart:function(){},scrollEnd:function(){var t=this;if(!(this.autoScrollFlag-- >0)){var e=this.scrollDetail.scrollTop-this.scrollStartTop;console.log(i("clientHeight="+this.clientHeight+",scrollTop="+this.scrollDetail.scrollTop+",diff="+e," at pages\\testVideo\\testVideo.vue:289")),e<0?(console.log(i("this.touchdata.diff>0"," at pages\\testVideo\\testVideo.vue:293")),this.scrollDetail.scrollTop%this.clientHeight<this.clientHeight-10?(console.log(i("e.detail.scrollTop%this.clientHeight < this.clientHeight*3/4"," at pages\\testVideo\\testVideo.vue:295")),this.nextPage=Math.floor(this.scrollDetail.scrollTop/this.clientHeight)):this.nextPage=Math.floor(this.scrollDetail.scrollTop/this.clientHeight+1)):this.scrollDetail.scrollTop%this.clientHeight>=10?this.nextPage=Math.floor(this.scrollDetail.scrollTop/this.clientHeight+1):this.nextPage=Math.floor(this.scrollDetail.scrollTop/this.clientHeight),this.nextPage>=this.videolist.length&&(this.nextPage=this.videolist.length-1),this.nextPage<0&&(this.nextPage=0),this.scrollToView="view-"+this.nextPage,this.autoScrollFlag=1,setTimeout(function(){t.scrollToView=""},300),this.currentPage!=this.nextPage&&setTimeout(function(){t.currentPage=t.nextPage,t.play(t.currentPage),t.showCover=!0},700)}},scroll:function(t){var e=this;this.showCover=!1,this.scrollDetail=t.detail,setTimeout(function(){e.playIndex},100)},scrollTo:function(t){this.play(t)},scrollMove:function(t){},touchStart:function(t){var e=t.touches[0];this.touchdata.startY=e.pageY,console.log(i("y="+this.touchdata.startY," at pages\\testVideo\\testVideo.vue:390")),this.inDown=-1,this.outTop=-1,this.inTop=-1,this.outDown=-1,this.touchdata.diff=0},touchMove:function(t){var e=t.touches[0],s=e.pageY;this.touchdata.diff=s-this.touchdata.startY,console.log(i("currentPage="+this.currentPage+",nextPage="+this.nextPage+",diff="+this.touchdata.diff+",y="+s+",startY="+this.touchdata.startY," at pages\\testVideo\\testVideo.vue:415"))},touchEnd:function(t){var e=this,s=this.scrollDetail.scrollTop-this.scrollStartTop;if(this.scrollDetail.scrollTop&&!(s>-1&&s<1)){console.log(i("clientHeight="+this.clientHeight+",scrollTop="+this.scrollDetail.scrollTop+",diff="+s," at pages\\testVideo\\testVideo.vue:424")),s<0?(console.log(i("this.touchdata.diff>0"," at pages\\testVideo\\testVideo.vue:427")),this.scrollDetail.scrollTop%this.clientHeight<this.clientHeight-10?(console.log(i("e.detail.scrollTop%this.clientHeight < this.clientHeight*3/4"," at pages\\testVideo\\testVideo.vue:429")),this.nextPage=Math.floor(this.scrollDetail.scrollTop/this.clientHeight)):this.nextPage=Math.floor(this.scrollDetail.scrollTop/this.clientHeight+1)):this.scrollDetail.scrollTop%this.clientHeight>=10?this.nextPage=Math.floor(this.scrollDetail.scrollTop/this.clientHeight+1):this.nextPage=Math.floor(this.scrollDetail.scrollTop/this.clientHeight),this.nextPage>=this.videolist.length&&(this.nextPage=this.videolist.length-1),this.nextPage<0&&(this.nextPage=0);this.touchdata.diff=0,this.scrollToView="view-"+this.nextPage,this.autoScrollFlag=2,setTimeout(function(){e.scrollToView=""},500),this.currentPage!=this.nextPage&&setTimeout(function(){e.currentPage=e.nextPage,e.play(e.currentPage),e.showCover=!0},700)}},like:function(e){var i=e.currentTarget.dataset.index;if(this.getUserInfo()){var s=this.videolist[i],o=null==s.favorId;s.favorId=!!o||null,s.favorite_num=o?s.favorite_num+1:s.favorite_num-1,this.postJson({path:"/video_favorite_do.jsp",data:{videoId:s.id,videoUid:s.uid,isLike:o},success:function(t){}})}else t.showToast({icon:"none",title:"请先登录"})},touchCacel:function(t){this.touchEnd(t)},close:function(t){this.showTab=!1}}};e.default=s}).call(this,i("6e42")["default"],i("0de9")["default"])},"94cd":function(t,e,i){"use strict";(function(t){i("19df"),i("921b");s(i("66fd"));var e=s(i("ff96"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},b6df:function(t,e,i){},d464:function(t,e,i){"use strict";var s=i("b6df"),o=i.n(s);o.a},ff96:function(t,e,i){"use strict";i.r(e);var s=i("2031"),o=i("59ab");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("d464");var l=i("2877"),n=Object(l["a"])(o["default"],s["a"],s["b"],!1,null,null,null);e["default"]=n.exports}},[["94cd","common/runtime","common/vendor"]]]);